{% extends "PPRequestBundle::layout.html.twig" %}


{% block requestBody %}            
    
        <base href=" " />
        <div ng-controller="requestsController as requests" ng-init="requests.init()">            
            
            
            {# display choose displayMode form #}
            <div class="demand-selector">

                <select id="contentToDisplaySelect" ng-change="requests.update()" ng-model="requests.contentToDisplay">
                    <option {% if contentToDisplay == 1 %}selected{% endif %} value="1">Request</option>
                    <option {% if contentToDisplay == 2 %}selected{% endif %} value="2">Proposition</option>
                </select>

                <select id="displayModeSelect" ng-change="requests.update()" ng-model="requests.displayMode" >
                    <option {% if displayMode == 1 %}selected{% endif %} value="1">Recent</option>
                    <option {% if displayMode == 2 %}selected{% endif %} value="2">Popular</option>
                    {% if  is_granted('ROLE_USER') %}
                        <option {% if displayMode == 3 %}selected{% endif %} value="3">Follows</option>
                    {% endif %}
                </select>               
            </div>
            {% if haveSearchParam == false %}
                {{ include("PPRequestBundle:Request:addRequestForm.html.twig") }}
            {% endif %}
            
            {{ form(loadRequestForm) }}
            {{ form(upvoteRequestForm) }}
            {{ form(upvotePropositionForm) }}
            <div id="loadPage1"></div>
                     
            <div class="load-content"  id="loadingGif" >
                <span class="bubble"></span>
            </div>

        </div>                
{% endblock %}

{% block js %}
    {% javascripts filter='?yui_js' '@PPRequestBundle/Resources/public/js/indexApp.js' %}
      <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}    
{% endblock %}