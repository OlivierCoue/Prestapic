{# src/OC/UserBundle/Resources/views/layout.html.twig #}

{# On �tend notre layout #}
{% extends "::layout.html.twig" %}

{% block title %}
    {{ pageProfile.name }}
{% endblock %}

{% block bellowHeader %}
<div id="profileApp" >
    <base href=" " />
    
    {# display profile header #}
    <section class="profile" ng-controller="profileController as profile" >        
        <div class="banner">
            <img src="{{ asset(pageProfile.coverImage.webPath("1500x500")) }}" alt="{{ pageProfile.coverImage.alt }}">
            <div class="overlay"></div>
        </div>                
        <div class="profile-details">
            <a class="avatar" href="#" title="">
              <img src="{{ asset(pageProfile.profilImage.webPath("70x70")) }}" alt="{{ pageProfile.profilImage.alt }}">
            </a>
            <h1 class="username">{{ pageProfile.name }}</h1>
            <p class="bio">Depuis plus de 5 ans je développe sur le web. Étudiant à @mmibdx, j'oriente mes études dans le milieu de l'informatique.</p>
            {% if is_granted('ROLE_USER') and isHownProfile == false %}
                {{ form(followForm) }}
                <a id="followButton" class="button follow" ng-click="profile.patchFollow()" >
                    {% if isFollowing == true %}
                        unfollow
                    {% else %}
                        follow
                    {% endif %}
                </a>
            {% endif %}
            
            <ul class="details">
                <li>
                    <strong>Following</strong>
                    {{ pageProfile.followingNb }}
                </li>
                <li>
                    <strong>Followers</strong>
                    {% if pageProfile.followersNb != null %}{{ pageProfile.followersNb }}{% else %}0{% endif %}
                </li>
                <li>
                    <strong>Reputation</strong>
                    1050
                </li>
                <li class="link">
                    <a href="#" title="">{{ pageProfile.email }}</a>                    
                </li>
            </ul>
        </div>                                            
    </section>
    
    {# display galery #}
    <section class="galery">        
        <div class="content">
            <h1>Gallery ({{ galleryImagesNb }} pictures)</h1>
            {% set break = false %}
            <ul>
            {% for proposition in galleryImages if not break %}
                <li>
                    <a href="{{ path('pp_request_view', {'slug':proposition.imageRequest.slug, 'page': 1 }) }}"><img src="{{ asset(proposition.image.webPath("380x260")) }}" alt="{{ proposition.image.alt }}"></a>                    
                </li>
               {% if loop.index >= 4  %}{% set break = true %}{% endif %}
               {% if loop.index >= 3 and galleryImagesNb > 4 %}{% set break = true %}{% endif %}
            {% endfor %}

            {% if galleryImagesNb > 4  %}
                <li>
                    <a href="" class="more">                    
                        +{{ galleryImagesNb-3 }}             
                    </a>
                </li>
            {% endif %}
            </ul>
        </div>
    </section>
{% endblock %}

{% block body %}   
    <div class="demand-list" > 
        
        {% if isHownProfile == true %}{{ include("PPRequestBundle:Request:addRequestForm.html.twig") }}{% endif %}
        
        <div ng-controller="requestsController as requests" ng-init="requests.init({{ pageProfile.id }})" >
            
            {{ form(loadRequestForm) }}
            <div id="loadPage1"> </div>
            
        <div id="loadingGif">
            <div id="contentArea">
                     <div class="_4-u2 mbm _2iwp">
                         <div class="_2iwo">
                             <div class="_2iwq">
                                 <div class="_2iwr"></div>
                                 <div class="_2iws"></div>
                                 <div class="_2iwt"></div>
                                 <div class="_2iwu"></div>
                                 <div class="_2iwv"></div>
                                 <div class="_2iww"></div>
                                 <div class="_2iwx"></div>
                                 <div class="_2iwy"></div>
                                 <div class="_2iwz"></div>
                                 <div class="_2iw-"></div>
                                 <div class="_2iw_"></div>
                                 <div class="_2ix0"></div>
                             </div>
                         </div>
                     </div>
                 </div>
                 <div id="contentArea">
                     <div class="_4-u2 mbm _2iwp">
                         <div class="_2iwo">
                             <div class="_2iwq">
                                 <div class="_2iwr"></div>
                                 <div class="_2iws"></div>
                                 <div class="_2iwt"></div>
                                 <div class="_2iwu"></div>
                                 <div class="_2iwv"></div>
                                 <div class="_2iww"></div>
                                 <div class="_2iwx"></div>
                                 <div class="_2iwy"></div>
                                 <div class="_2iwz"></div>
                                 <div class="_2iw-"></div>
                                 <div class="_2iw_"></div>
                                 <div class="_2ix0"></div>
                             </div>
                         </div>
                     </div>
                 </div>
                 <style type="text/css">
                     #contentArea {                  
                       width: 496px;
                     }

                     .mbm {
                       margin-bottom: 10px;
                     }

                     ._4-u2 {
                       background: #eeeeee;
                     }

                     ._2iwo {
                       height: 300px;
                       padding: 12px;
                     }

                     ._2iwq {
                       -webkit-animation-duration: 1s;
                       -webkit-animation-fill-mode: forwards;
                       -webkit-animation-iteration-count: infinite;
                       -webkit-animation-name: placeHolderShimmer;
                       -webkit-animation-timing-function: linear;
                       background: #e2d6d6;
                       background-image: -webkit-gradient(linear, left center, right center, from(#e2d6d6), color-stop(0.2, #eae0e0), color-stop(0.4, #2d6d6), to(#c78f8f));
                       background-image: -webkit-linear-gradient(left, #d6b4b4 0%, #cea6a6 20%, #e2d6d6 40%, #d3a5a5 100%);
                       background-repeat: no-repeat;
                       background-size: 800px 104px;
                       height: 104px;
                       position: relative;
                     }

                     ._2rtk ._2iwq {
                       -webkit-animation-name: prideShimmer;
                       background-image: -webkit-gradient(linear, center top, center bottom, from(deg), color-stop(0, red), color-stop(0.15, orange), color-stop(0.3, yellow), color-stop(0.45, green), color-stop(0.6, blue), color-stop(0.75, indigo), color-stop(0.8, violet), to(red));
                       background-image: -webkit-linear-gradient(135deg, red 0%, orange 15%, yellow 30%, green 45%, blue 60%, indigo 75%, violet 80%, red 100%);
                       background-repeat: repeat;
                       background-size: 50% auto;
                     }

                     .direction_rtl ._2iwq {
                       -webkit-animation-direction: reverse;
                     }

                     ._2iwq div {
                       background: #eeeeee;
                       height: 6px;
                       left: 0;
                       position: absolute;
                       right: 0;
                     }

                     div._2iwr {
                       height: 40px;
                       left: 40px;
                       right: auto;
                       top: 0;
                       width: 8px;
                     }

                     div._2iws {
                       height: 8px;
                       left: 48px;
                       top: 0;
                     }

                     div._2iwt {
                       left: 136px;
                       top: 8px;
                     }

                     div._2iwu {
                       height: 12px;
                       left: 48px;
                       top: 14px;
                     }

                     div._2iwv {
                       left: 100px;
                       top: 26px;
                     }

                     div._2iww {
                       height: 10px;
                       left: 48px;
                       top: 32px;
                     }

                     div._2iwx {
                       height: 20px;
                       top: 40px;
                     }

                     div._2iwy {
                       left: 410px;
                       top: 60px;
                     }

                     div._2iwz {
                       height: 13px;
                       top: 66px;
                     }

                     div._2iw- {
                       left: 440px;
                       top: 79px;
                     }

                     div._2iw_ {
                       height: 13px;
                       top: 85px;
                     }

                     div._2ix0 {
                       left: 178px;
                       top: 98px;
                     }

                     @-webkit-keyframes placeHolderShimmer {
                       0% {
                         background-position: -468px 0;
                       }

                       100% {
                         background-position: 468px 0;
                       }
                     }
                     @-webkit-keyframes prideShimmer {
                       from {
                         background-position: top left;
                       }

                       to {
                         background-position: top right;
                       }
                     }

                    </style>
                </div>
            </div>
    </div>
</div>
{% endblock %}


{% block js %}
    {% javascripts filter='?yui_js' '@PPUserBundle/Resources/public/js/profileApp.js' %}
      <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}    
{% endblock %}