{# src/OC/UserBundle/Resources/views/layout.html.twig #}

{# On ï¿½tend notre layout #}
{% extends "::layout.html.twig" %}

{% block title %}
    Settings
{% endblock %}

{% block body %}
   
    {% if user.enabled == true %}
       
        <div class="main-left" > 
            <base href=" " />
            <h1>Settings</h1>            
            {{ form_start(changePasswordForm, { 'action': path('pp_user_setting', {'slug': user.slug}), 'attr': { 'class': 'fos_user_change_password' } }) }}
                {{ form_widget(changePasswordForm) }}
                <div>
                    <input type="submit" value="Save" />
                </div>
            {{ form_end(changePasswordForm) }}                  
                        
            {{ form(formNotifEnable) }}
            <div ng-controller="settingController as setting" >
                <h3>Notifications : </h3>               
                <input id="notif_mode" type="checkbox" ng-model="setting.notificationMode" {% if user.notificationEnabled == true %}checked{% endif %} ng-change="setting.patchNotificationMode()" name="notif_mode" value="notif_mode" />
                <label for="notif_mode">Notifications : </label>
                
                
                <form action="{{ path('pp_user_disable_account') }}" method="POST">
                    <input type="password" name="password" required value="" placeholder="password"/>
                    <input type="submit" value="delete account" />
                </form>                    
            </div>
        </div>

    {% endif %}
{% endblock %}

{% block sideInfo %}
    
{% endblock %}

{% block js %}
    {% javascripts filter='?yui_js' '@PPUserBundle/Resources/public/js/settingApp.js' %}
      <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %} 
{% endblock %}