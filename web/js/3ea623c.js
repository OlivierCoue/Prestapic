var IMAGE_REQUEST=1;var PROPOSITION=2;var USER=3;angular.element(document).ready(function(){var a=document.getElementById("containerApp");angular.bootstrap(a,["containerApp"])});var containerApp=angular.module("containerApp",["ngRoute"]);containerApp.config(["$locationProvider",function(a){a.html5Mode(true)}]);containerApp.run(["$rootScope","$http",function(a,c){a.currentObject={};var b=document.forms.pp_dashboard_report_api_get_reported_objects_form.action;c.get(b).then(function(d){a.reportObjects=d.data},function(d){console.log("Request failed : "+d.statusText)})}]);containerApp.controller("objectReportedController",["$scope","$rootScope","$http","$compile","$location",function(b,a,e,c,d){this.currentType=IMAGE_REQUEST;this.changeCurrentType=function(f){this.currentType=f;a.$emit("changeType",f)};this.getReportTicket=function(h,g){var f=document.forms.pp_dashboard_report_api_get_report_ticket_form.action;e.get(f+"?type="+h+"&targetId="+g).then(function(i){switch(h){case IMAGE_REQUEST:b.reportObjects.imageRequestList[g].reportTicketList=i.data;b.currentObject=b.reportObjects.imageRequestList[g];b.currentObject.type=IMAGE_REQUEST;a.$emit("changeCurrentObject",b.currentObject);break;case USER:b.reportObjects.userList[g].reportTicketList=i.data;b.currentObject=b.reportObjects.userList[g];b.currentObject.type=USER;a.$emit("changeCurrentObject",b.currentObject);break}},function(i){console.log("Request failed : "+i.statusText)})}}]);containerApp.controller("reportController",["$scope","$rootScope","$http","$compile","$location",function(b,a,e,c,d){b.currentObject=null;b.disableData={reasonId:1,details:null};a.$on("changeCurrentObject",function(g,f){b.currentObject=f;b.disableData.ticketType=f.type;b.disableData.targetId=f.id});a.$on("changeType",function(g,f){b.currentObject=null;b.disableData.ticketType=f});this.postDisableRequest=function(){var h=b.disableData.ticketType;switch(h){case IMAGE_REQUEST:var g=prompt('Enter "YES" to comfirm');break;case USER:var g=prompt("Enter user name to comfirm");break}if((h==IMAGE_REQUEST&&g=="YES")||(h==USER&&g==b.currentObject.name)){var f=document.forms.pp_report_api_post_disable_ticket_form.action;if(b.disableData.targetId!=null){console.log(b.disableData);b.disableData.reasonId=parseInt(b.disableData.reasonId);e({method:"POST",url:f,data:JSON.stringify(b.disableData)}).then(function(i){switch(b.disableData.ticketType){case IMAGE_REQUEST:b.currentObject=null;b.reportObjects.userList[b.disableData.targetId]=null;showBannerAlert("success","Image request deleted !","");break;case USER:b.currentObject=null;b.reportObjects.userList[b.disableData.targetId]=null;showBannerAlert("success","User deleted !","");break}},function(i){console.log("Request failed : "+i.statusText);showBannerAlert("danger",i.statusText,"")})}}else{showBannerAlert("warning","Wrong text entered","")}};this.patchIgnoreReport=function(){var f=document.forms.pp_report_api_patch_ignore_tickets_form.action;if(confirm("Do you realy want to ignore reports ?")){e({method:"PATCH",url:f,data:JSON.stringify(b.disableData)}).then(function(g){switch(b.disableData.ticketType){case IMAGE_REQUEST:b.currentObject=null;b.reportObjects.imageRequestList[b.disableData.targetId]=null;showBannerAlert("success","Image request's reports ignored !","");break;case USER:b.currentObject=null;b.reportObjects.userList[b.disableData.targetId]=null;showBannerAlert("success","User's reports ignored !","");break}},function(g){console.log("Request failed : "+g.statusText);showBannerAlert("danger",g.statusText,"")})}}}]);